\mode<presentation>

\DeclareOptionBeamer{titlepage}{\def\beamer@titlepage{#1}}

\setbeamertemplate{title page}{default}{}

% Itemize items, plmce-2016
\setbeamertemplate{items}[circle]

\setbeamertemplate{itemize item}{\raise0.1pt\hbox{\textbullet}}
\setbeamertemplate{itemize subitem}{\raise0.1pt\hbox{\textbullet}}
\setbeamertemplate{itemize subsubitem}[square]

\setbeamertemplate{section in toc}
{\leavevmode{\raise0.5pt\hbox{\textcolor{pu-2022bordo}\textbullet}}\inserttocsection\par}

\setbeamertemplate{itemize/enumerate body begin}{\usebeamerfont{itemize item}}
\setbeamertemplate{itemize/enumerate subbody begin}{\usebeamerfont{itemize subitem}}

% Title page
\setbeamercolor{background canvas}{bg=white}
\defbeamertemplate*{title page}{pl-2022}[1][]
{
    \begin{textblock*}{\paperwidth}(0\paperwidth,0.09\paperheight)
        {\includegraphics[width=0.75\paperwidth,keepaspectratio]{image5.jpg}}
    \end{textblock*}

	\begin{textblock*}{\paperwidth}(0.76\paperwidth,0.09\paperheight)
		{\includegraphics[height=0.79\paperheight,keepaspectratio]{image6.jpg}}
	\end{textblock*}

	\begin{textblock*}{\paperwidth}(0.785\paperwidth,0.28\paperheight)
		{\includegraphics[width=0.19\paperwidth,keepaspectratio]{image3.png}}
	\end{textblock*}

	\begin{textblock*}{\paperwidth}(0.285\paperwidth,0.90\paperheight)
		{\includegraphics[height=0.08\paperheight,keepaspectratio]{image1.png}}
	\end{textblock*}

	\ifx\insertsubtitle\@empty%
	    \begin{textblock*}{0.56\paperwidth}(0.28\paperwidth,0.33\paperheight)
	            \begin{beamercolorbox}{title page header}
	                    \usebeamerfont{title}\inserttitle\hfill%
	            \end{beamercolorbox}%
	    \end{textblock*}
	\else
		\begin{textblock*}{0.61\paperwidth}(0.28\paperwidth,0.33\paperheight)
			\begin{beamercolorbox}{title page header}
				\usebeamerfont{title}\inserttitle\hfill\par\usebeamerfont{subtitle}\insertsubtitle\hfill%
			\end{beamercolorbox}%
		\end{textblock*}
	\fi

	\ifx\insertinstitute\@empty%
    \begin{textblock*}{0.61\paperwidth}(0.4\paperwidth,0.63\paperheight)
    	\begin{beamercolorbox}{author}
            \usebeamerfont{author}\insertauthor\hfill\par%
    	\end{beamercolorbox}%
    \end{textblock*}
	\else
    \begin{textblock*}{0.61\paperwidth}(0.4\paperwidth,0.63\paperheight)
    	\begin{beamercolorbox}{author}
            \usebeamerfont{author}\insertauthor\hfill\par\usebeamerfont{author}\insertinstitute\par%
    	\end{beamercolorbox}%
    \end{textblock*}
	\fi
	
}

\defbeamertemplate*{section page}{pu-istanbul-2022} {
    \begin{tikzpicture}[overlay, remember picture]
        \begin{scope}[shift={(current page.north west)}]
            \fill[percona-2020lightgray](0.958\paperwidth,-0.113\paperheight) rectangle (\paperwidth,-0.887\paperheight);
        \end{scope}
    \end{tikzpicture}

    \begin{textblock*}{\paperwidth}(0.0\paperwidth,0.09\paperheight)
        {\includegraphics[height=0.79\paperheight,keepaspectratio]{image4.jpg}}
    \end{textblock*}

    \begin{textblock*}{0.6\paperwidth}(0.319\paperwidth,0.13\paperheight)
			\vfill
    	\begin{beamercolorbox}{section}
			\begin{center}
        	\usebeamerfont{section title}\insertsection
			\end{center}
    	\end{beamercolorbox}%
			\vfill
    \end{textblock*}

    \vspace{0.15\paperheight}
}

\defbeamertemplate*{subsection page}{pu-istanbul-2022} {
    \begin{tikzpicture}[overlay, remember picture]
        \begin{scope}[shift={(current page.north west)}]
            \fill[percona-2020lightgray](0.958\paperwidth,-0.113\paperheight) rectangle (\paperwidth,-0.887\paperheight);
        \end{scope}
    \end{tikzpicture}

    \begin{textblock*}{\paperwidth}(0.0\paperwidth,0.09\paperheight)
        {\includegraphics[height=0.79\paperheight,keepaspectratio]{image4.jpg}}
    \end{textblock*}

    \begin{textblock*}{0.6\paperwidth}(0.319\paperwidth,0.13\paperheight)
			\vfill
    	\begin{beamercolorbox}{subsection}
			\begin{center}
        	\usebeamerfont{subsection title}\insertsubsection
			\end{center}
    	\end{beamercolorbox}%
			\vfill
    \end{textblock*}

    \vspace{0.15\paperheight}
}

%change frame style
%see /usr/share/texmf/tex/latex/beamer/beamerbaseframe.sty for example
\define@key{beamerframe}{c}[true]{% centered
	\beamer@frametopskip=-0.1\paperheight plus 1fill\relax%
	\beamer@framebottomskip=0.5cm plus 1.5fill\relax%
	\beamer@frametopskipautobreak=0pt plus .4\paperheight\relax%
	\beamer@framebottomskipautobreak=0pt plus .6\paperheight\relax%
	\def\beamer@initfirstlineunskip{}%
}

\mode<all>
